<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Status Chart</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #chart_div { width: 100%; max-width: 400px; height: 250px; margin: auto; }
    </style>
</head>
<body>
    <h2>Job Status Chart</h2>
    <div id="chart_div"></div>

    <script type="text/javascript">
        google.charts.load('current', {packages: ['corechart', 'bar']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Job Status', 'Count', {role: 'style'}], 
                ['Received', 25, '#1f77b4'],
                ['Delivered', 18, '#ff7f0e'],
                ['Invoiced', 12, '#2ca02c'],
                ['In Progress', 20, '#d62728'],
                ['Incomplete', 8, '#9467bd'],
                ['Problematic', 5, '#8c564b']
            ]);

            var options = {
                title: 'Job Status',
                chartArea: { width: '70%' },
                hAxis: { title: 'Job Status' },
                vAxis: { title: 'Number of Jobs', minValue: 0 },
                legend: 'none'
            };

            var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));

            google.visualization.events.addListener(chart, 'select', function () {
                var selectedItem = chart.getSelection()[0];
                if (selectedItem) {
                    var status = data.getValue(selectedItem.row, 0);
                    openTable(status);
                }
            });

            chart.draw(data, options);
        }

        function openTable(status) {
            window.location.href = `table.html?status=${encodeURIComponent(status)}`;
        }
    </script>
</body>
</html>
